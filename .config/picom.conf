# +----------------------------------------------------------------------------+
# | .config/compton.conf                                                       |
# +----------------------------------------------------------------------------+
# | Copyright Â© 2019 Waldemar Schroeer                                         |
# |                  waldemar.schroeer(at)rz-amper.de                          |
# +----------------------------------------------------------------------------+

# +------------------------------- Backend ------------------------------------+
backend                                         = "glx";
vsync                                           = true;
inactive-opacity-override                       = false;
xrender-sync-fence                              = true;
resize-damage                                   = 20
sync                                            = "none";
glx-use-copysubbuffermesa                       = true;
glx-no-stencil                                  = false;
glx-no-rebind-pixmap                            = true;
glx-copy-from-front                             = true;
detect-rounded-corners                          = true;
detect-client-opacity                           = true;
detect-transient                                = true;
detect-client-leader                            = true;

# +------------------------------- Transitions --------------------------------+
transition = true;
transition-offset = 30;
transition-direction = "smart-y";
transition-timing-function = "ease-out-bounce";
transition-step = 0.02;
transition-rule = [];

# +------------------------------- Shadow -------------------------------------+
shadow                                          = true;
shadow-radius                                   = 25;
# shadow-offset-x                                 = -25;
# shadow-offset-y                                 = -25;
shadow-opacity                                  = 1.0;
shadow-color                                    = "#000000";
shadow-exclude                                  = [ "!focused" ];
# shadow-exclude = [
#     "name = 'Notification'",
#     "name = 'FreeRDP*'",
#     "name = 'oneko'",
#     "class_g = 'xfreerdp'",
#     "class_g = 'dwm'",
#     "class_g = 'Microsoft Teams - Preview'",
#     "_GTK_FRAME_EXTENTS@:c"
# ];

# +------------------------------- Blur ---------------------------------------+
blur: {
        method                                  = "dual_kawase";
        strength                                = 3.0;
        deviation                               = 1.0;
        kernel                                  = "11x11gaussian";
}
blur-background                                 = true;
blur-background-exclude                         = [ "name = 'stw'",
                                                    "name *= 'rect-overlay'",
                                                    "class_g = 'gimp-2.10'",
                                                    "class_g = 'mpv'",
                                                    "class_g = 'slop'",
                                                    "class_g = 'Google-chrome'" ];

# +------------------------------- Corners ------------------------------------+
corner-radius                                   = 10;
rounded-corners-exclude                         = [ "class_g = 'dwm'" ];

# +------------------------------- Opacity ------------------------------------+
inactive-opacity                                = 0.7;
active-opacity                                  = 0.97;
# menu-opacity                                  = 0.93;
# inactive-dim                                  = 0.5;
# frame-opacity                                 = 1;

opacity-rule                                    = [ "70:name = 'cava'",
                                                    "100:name = 'oneko'",
                                                    "100:class_g = 'dwm'",
                                                    "100:class_g = 'dmenu'",
                                                    "100:class_g = 'Gimp'",
                                                    "100:class_g = 'Gimp-2.8'",
                                                    "100:class_g = 'Google-chrome'",
                                                    "100:class_g = 'mpv'",
                                                    "100:class_g = 'Microsoft-edge-beta'",
                                                    "100:class_g = 'Microsoft Teams - Preview'",
                                                    "100:class_g = 'obs'",
                                                    "100:class_g = 'Oneko'",
                                                    "100:class_g = 'Surf'",
                                                    "100:class_g = 'Sxiv'",
                                                    "100:class_g = 'tabbed'",
                                                    "100:class_g = 'tabbed-surf'",
                                                    "100:class_g = 'kdenlive'",
                                                    "100:class_g = 'VirtualBox Machine'",
                                                    "100:class_g = 'vlc'",
                                                    "100:class_g = 'Vmrc'",
                                                    "100:class_g = 'Wfica'",
                                                    "100:class_g = 'xfreerdp'" ];

# +------------------------------- Fading -------------------------------------+
fading                                          = true;
fade-in-step                                    = 0.05;
fade-out-step                                   = 0.05;
fade-exclude                                    = [ "class_g = 'xfreerdp'" ];

# +------------------------------- Focus --------------------------------------+
focus-exclude                                   = [ "! name~=''",
                                                    "name = 'cava'",
                                                    "class_g = 'dwm'",
                                                    "class_g = 'dmenu'",
                                                    "class_g = 'Gimp'",
                                                    "class_g = 'Gimp-2.8'",
                                                    "class_g = 'mpv'" ];

# +------------------------------- Other --------------------------------------+
wintypes:
{
  tooltip = { fade = true; shadow = true; opacity = 0.75; focus = true; full-shadow = false; };
  dock = { shadow = false; }
  dnd = { shadow = false; }
  popup_menu = { opacity = 0.8; }
  dropdown_menu = { opacity = 0.8; }
};
